diff --git a/index.js b/index.js
index 88a62e9..8641e3b 100644
--- a/index.js
+++ b/index.js
@@ -1,13 +1,13 @@
 var cp = require('child_process');
 
 module.exports = function whereis(name, cb) {
-  cp.exec('which ' + name, function(error, stdout, stderr) {
+  cp.execFile('which', [name], function(error, stdout, stderr) {
     stdout = stdout.split('\n')[0];
     if (error || stderr || stdout === '' || stdout.charAt(0) !== '/') {
       stdout = stdout.split('\n')[0];
-      cp.exec('whereis ' + name, function(error, stdout, stderr) {
+      cp.execFile('whereis', [name], function(error, stdout, stderr) {
         if (error || stderr || stdout === '' || stdout.indexOf( '/' ) === -1) {
-          cp.exec('where ' + name, function (error, stdout, stderr) { //windows
+          cp.execFile('where', [name], function (error, stdout, stderr) { //windows
             if (error || stderr || stdout === '' || stdout.indexOf('\\') === -1) {
               cp.exec('for %i in (' + name + '.exe) do @echo. %~$PATH:i', function (error, stdout, stderr) { //windows xp
                 if (error || stderr || stdout === '' || stdout.indexOf('\\') === -1) {
diff --git a/test.js b/test.js
index 3ae6172..90d35dd 100644
--- a/test.js
+++ b/test.js
@@ -4,7 +4,7 @@ var
   whereis = require('./');
 
 test("when which found our program", function(t) {
-  cp.exec = function(name, cb) {
+  cp.execFile = function(program, args, cb) {
     cb(null, '/etc/bin');
   };
 
@@ -16,7 +16,7 @@ test("when which found our program", function(t) {
 
 test("when which did not found, whereis found it", function(t) {
   var callcount = 0;
-  cp.exec = function(name, cb) {
+  cp.execFile = function(program, args, cb) {
     if (callcount === 0) {
       callcount++;
       cb(null, 'not found bin');
@@ -33,7 +33,7 @@ test("when which did not found, whereis found it", function(t) {
 
 test("when which did not found, whereis did not found, where will find", function(t) {
   var callcount = 0;
-  cp.exec = function(name, cb) {
+  cp.execFile = function(program, args, cb) {
     if (callcount < 2) {
       callcount++;
       cb(null, 'not found bin');
@@ -49,7 +49,7 @@ test("when which did not found, whereis did not found, where will find", functio
 });
 
 test("when which found it and output has linebreak", function(t) {
-  cp.exec = function(name, cb) {
+  cp.execFile = function(program, args, cb) {
     cb(null, '/etc/bin\n');
   };
 
